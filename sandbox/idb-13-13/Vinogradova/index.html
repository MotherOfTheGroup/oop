<!DOCTYPE html>
<html>
<head>
<title>Виноградова М.Б. ИДБ-13-13</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<link rel="stylesheet" type="text/css" href="styles.css">
	<script src="assets/js/jquery-1.11.1.min.js"></script>
		<style>
		
			table thead td{
				cursor: pointer;
				background:grey;
			}
		</style>	
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script src="/jquery-1.11.1.min.js"></script>
	
	<script type="text/javascript" src="//vk.com/js/api/openapi.js?143"></script>
</head>
<body>
<a name="top"></a>
<div id="cont">
<center>
<img src="http://vkclub.su/_data/stickers/luna/sticker_vk_luna_000.png" width="250" height="250">
<h2> Список заданий:</h2>
<ol>
<li><a href="#table">Описать элемент html < table > c примером использования</a></li>
<li><a href="#WIKI">Создать WIKI для лабораторной работы №7</a></li>
<li><a href="#SPA">Single Page Application</a></li></ol>
	
		

<h2>Uml для < table ></h2>
<img src="classess.png">
<a name="table"><h2>Функционал < table ></h2></a>
	<p>При нажатии на название столбца, данные сортируются</p>
<table border="1">
			<thead>
				<tr>
					<td id="predmet">Предмет</td>
					<td id="m1">M1</td>
					<td id="m2">M2</td>
					<td id="kurs">Курсовая</td>
					<td id="zachet">Зачет</td>
					<td id="exam">Экзамен</td>
				</tr>
			</thead>
			<tbody>
				
			</tbody>
		</table>
	</body>
	<script>
		var data = 
				[{predmet:"Администрирование в ИС",m1:45,m2:50,kurs:"x",zachet:"x", exam:"45"}, 
				{predmet:"Инф безопасность и защита информации",m1:50,m2:43,kurs:"x",zachet:"x", exam:"41"}, 
				{predmet:"Корпоративные ИС",m1:43,m2:40,kurs:"43",zachet:"x", exam:"43"}, 
				{predmet:"Мультимедиа технологии",m1:45,m2:47,kurs:"x",zachet:"х", exam:"46"}, 
				{predmet:"Надежность ис",m1:25,m2:40,kurs:"x",zachet:"35", exam:"х"}, 
				{predmet:"Проектирование ИС",m1:49,m2:46,kurs:"50",zachet:"х", exam:"45"}, 
				{predmet:"Проектный менеджмент ИС",m1:41,m2:42,kurs:"x",zachet:"х", exam:"35"}, 
				{predmet:"Станд и серт инф-прогр ср-в",m1:39,m2:45,kurs:"x",zachet:"х", exam:"45"},
				{predmet:"Экология",m1:30,m2:35,kurs:"x",zachet:"30", exam:"х"}];
		//самовызывающая ф-я, она закрыта от общей видемости, в неё передаём объект жквери и объект, который рисуем.
		(function(jQuery,data){
		
			var sort_direction = true;
			var $ = jQuery;
			
			
			//рисуем таблицу как есть
			draw_table(data);
			//тут и ежу понятно
			$("table thead td").bind("click", function(){
				sort_direction = !sort_direction;
		
				if(sort_direction){
					for(var i=0;i<(data.length-1);i++)
						var index = i+1;
						compare_true(data[i] ,data[index] ,data , $(this).attr("id"));//передаём 2 значения для сравнения, массив и элемент на который тыкнули
				}else{
					for(var i=0;i<(data.length-1);i++)
						var index = i+1;
						compare_false(data[i] ,data[index] ,data , $(this).attr("id") );
				}
				//после сортировки перерисовываем таблицу
				draw_table(data);
			});
			
			function draw_table(data){
				//удаляем старые данные и добавляем строки в таблицу
				$("table>tbody").html("");
				data.forEach(function(item){
					$("table>tbody").append("<tr><td>"+item.predmet+"</td><td>"+item.m1+"</td><td>"+item.m2+"</td><td>"+item.kurs+"</td><td>"+item.zachet+"</td><td>"+item.exam+"</td></tr>");
				});
			}
			// сюда мы пихаем 2 сравниваемых элемента, массив, и ключ по которому сортируем, массив по ссылке, так что он сразу редактируется.
			function compare_true(a ,b ,data , key) {
				data.sort(function(a, b){
					var _a = a[key];
					var _b = b[key];
					if(typeof _a == "string"){
						
						_a=_a.toLowerCase(), _b=_b.toLowerCase();
					}
					
					
					if (_a < _b)
						return -1;
					if (_a > _b)
						return 1;
					return 0;
				});
			}
			//обратная сортировка
			function compare_false(a ,b ,data , key) {
				data.sort(function(a, b){
					var _a = a[key];
					var _b = b[key];
					if(typeof _a == "string"){
						
						_a=_a.toLowerCase(), _b=_b.toLowerCase();
					}
					
					
					if (_a > _b)
						return -1;
					if (_a < _b)
						return 1;
					return 0;
				});
			}
		})(jQuery,data);
		
	</script>
	
	<a href="http://pastebin.com/5gvUr9pL">Исходный код</a>

<a name="WIKI"><h2>Wiki-страница</h2></a>
<p>Ознакомиться с моей вики-страницей вы можете по ссылке: <a href="https://github.com/stankin/oop/wiki/%D0%9B%D0%B0%D0%B1%D0%BE%D1%80%D0%B0%D1%82%D0%BE%D1%80%D0%BD%D0%B0%D1%8F-%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0-%E2%84%967">< клик ></a> </p>

<a name="SPA"><h2>SPA</h2></a></center>
	<h3>Требования к SPA</h3>
<ul><li>Пользователь должен иметь возможность настраивать:</li>
		<ul><li>Общий фон приложения</li>
			<li>Фон циферблата</li>
			<li>Цвет рамки часов</li></ul><br>			
		<li>Авторизация и аутентификация пользователя должна происходить через VK oauth API</li>
		<br>
		<li>Возможность настройки предоставляется только аутентифицированным пользователям</li>
		<br>
		<li>Цвет выбирается из предложенных в выпадающем списке</li></ul>
<center>	
	

	<p>
	<script type="text/javascript">
  VK.init({apiId: 5963037});
function authInfo(response) {
  if (response.session) {
    alert('user: '+response.session.mid);
  } else {
    alert('not auth');
  }
}
VK.Auth.getLoginStatus(authInfo);
VK.UI.button('login_button');
		
</script>
	<div id="vk_auth"></div>
	<script type="text/javascript">
	VK.Widgets.Auth("vk_auth", {onAuth: function(data) {
	 alert('user '+data['uid']+' authorized');
	 });
	</script> 


	

	     </p>
	
	<p>
<div id="selectors">	  
    Цвет фона циферблата: <SELECT name="Фон" onchange="BackGr=this.value;">
    <OPTION value="#f2cd9d">Стандартный</option>
    <OPTION value="#fff9e2">Бежевый</option>
    <OPTION value="#deff7c">Салатовый</option>
	<OPTION value="#d6fffc">Голубой</option>
  </SELECT> |  Цвет рамки часов: <SELECT name="Контур" onchange="BackGrBorder=this.value;">
    <OPTION value="#eca84f">Стандартный</option>
    <OPTION value="#d3c2ad">Бежевый</option>
    <OPTION value="#8fa845">Салатовый</option>
	<OPTION value="#7eafac">Голубой</option>
  </SELECT>
	</div>
 </p>
			  
	
	
<canvas id="canvas" width="400" height="400">
</canvas>

<script>
				    
var BackGr = '#f2cd9d';
var BackGrBorder = '#eca84f';
					    
					    
var canvas = document.getElementById("canvas");
var ctx = canvas.getContext("2d");
var radius = canvas.height / 2;
ctx.translate(radius, radius);
radius = radius * 0.90
setInterval(drawClock, 1000);
function drawClock() {
  drawFace(ctx, radius);
  drawNumbers(ctx, radius);
  drawTime(ctx, radius);
}
function drawFace(ctx, radius) {
  var grad;
  ctx.beginPath();
  ctx.arc(0, 0, radius, 0, 2*Math.PI);
  ctx.fillStyle = BackGr;
  ctx.fill();
  grad = ctx.createRadialGradient(0,0,radius*0.95, 0,0,radius*1.05);
  grad.addColorStop(0, '#333');
  grad.addColorStop(0.5, BackGrBorder);
  grad.addColorStop(1, '#333');
  ctx.strokeStyle = grad;
  ctx.lineWidth = radius*0.1;
  ctx.stroke();
  ctx.beginPath();
  ctx.arc(0, 0, radius*0.1, 0, 2*Math.PI);
  ctx.fillStyle = '#333';
  ctx.fill();
}
function drawNumbers(ctx, radius) {
  var ang;
  var num;
  ctx.font = radius*0.15 + "px arial";
  ctx.textBaseline="middle";
  ctx.textAlign="center";
  for(num = 1; num < 13; num++){
    ang = num * Math.PI / 6;
    ctx.rotate(ang);
    ctx.translate(0, -radius*0.85);
    ctx.rotate(-ang);
    ctx.fillText(num.toString(), 0, 0);
    ctx.rotate(ang);
    ctx.translate(0, radius*0.85);
    ctx.rotate(-ang);
  }
}
function drawTime(ctx, radius){
    var now = new Date();
    var hour = now.getHours();
    var minute = now.getMinutes();
    var second = now.getSeconds();
    //hour
    hour=hour%12;
    hour=(hour*Math.PI/6)+
    (minute*Math.PI/(6*60))+
    (second*Math.PI/(360*60));
    drawHand(ctx, hour, radius*0.5, radius*0.07);
    //minute
    minute=(minute*Math.PI/30)+(second*Math.PI/(30*60));
    drawHand(ctx, minute, radius*0.8, radius*0.07);
    // second
    second=(second*Math.PI/30);
    drawHand(ctx, second, radius*0.9, radius*0.02);
}
function drawHand(ctx, pos, length, width) {
    ctx.beginPath();
    ctx.lineWidth = width;
    ctx.lineCap = "round";
    ctx.moveTo(0,0);
    ctx.rotate(pos);
    ctx.lineTo(0, -length);
    ctx.stroke();
    ctx.rotate(-pos);
}
</script>
			       
			       
	
	<p><a href="https://github.com/stankin/oop/tree/master/sandbox/idb-13-13/Vinogradova">Исходники на GitHub</a></p>
 <p><a href="#top">Наверх</a></p></center>
</div>
</body>
</html>
